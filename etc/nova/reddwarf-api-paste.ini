[DEFAULT]
verbose = 1

#############
# Platform #
#############

[filter:faultwrap]
paste.filter_factory = nova.api.openstack:FaultWrapper.factory

[filter:auth_shim]
paste.filter_factory = keystone.middleware.nova_auth_token:KeystoneAuthShim.factory

[filter:tokenauth]
paste.filter_factory = keystone.middleware.auth_token:filter_factory
service_protocol = http
service_host = 127.0.0.1
service_port = 5000
auth_host = 127.0.0.1
auth_port = 5001
auth_protocol = http
admin_token = service_admin_token

[filter:ratelimit]
paste.filter_factory = nova.api.openstack.ratelimiting:RateLimitingMiddleware.factory


#########
# DBaaS #
#########

[composite:dbaasapi]
use = egg:Paste#urlmap
/: dbaasversions
/v1.0: dbaasapi10

[pipeline:dbaasapi10]
pipeline = faultwrap tokenauth auth_shim ratelimit dbaasapiapp

[app:dbaasapiapp]
paste.app_factory = nova.api.platform.dbaas:APIRouter.factory

[pipeline:dbaasversions]
pipeline = faultwrap dbaasversionapp

[app:dbaasversionapp]
paste.app_factory = nova.api.platform.dbaas.versions:Versions.factory
